{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load crispy_forms_tags %}
{% load ttttags %}
{% load tagss %}
{% load static %}

{% block content %}
<a id="go-back-btn-before" href="{% if is_trener or is_director %}{% url 'library:main' %}{%else%}{{ module.subject_materials.first.subject.get_absolute_url }}{% endif %}">
    <i class="arrow left icon"></i>
</a>
<div id="profile">
    <div class="ui container" >
        <div class="ui stackable grid">
            {% include 'left_menu.html' %}
            <div class="ten wide column" style="margin-left: 50px;">
			    <div class="ui segment" style="padding-bottom: 20px;margin-bottom: 0">
			        <h3 style="margin-bottom: 0;text-align: center; color: #696969;font-size: 30px;font-weight: 500">
			            {{ module.title }}
			        </h3>
			        <div class="ui stackable grid" style="text-align: center; margin: 14px 0 0 0;">
			            {% for ppr in module.topics.all %}
			            <a class="{% if topic == ppr %}switch_btn_active{% endif %} switch_btn" href="{{ ppr.get_absolute_url }}" style="width: calc(100%/({{ module.topics.all|length }} + 1));">
			                <div style="text-overflow: ellipsis;white-space: nowrap;overflow: hidden;display: inline-block;width: 90%;">
			                    {{ ppr.title }}
			                </div>
			                <div class="l{{ module.id }}p{{ ppr.id }}done_tick" style="{% if ppr|is_done:profile == False %}display: none;{% else %}display: inline-block;float: right;background-color: #32CD32;border-radius: 50%;height: 15px;width: 15px;margin-top: 1px;{% endif %}">
			                    <i class="icon check" style="color: #fff !important;font-size: 12px;margin-top: -1px"></i>
			                </div>
			            </a>
			            {% endfor %}
			            <a href="{{ module.estimate_module_page }}" class="{% if not topic or hisestimation or hisestimation == 0 %}switch_btn_active{% endif %} switch_btn" 
			            style="width: calc(100%/({{ module.topics.all|length }} + 1));">
			                <div style="text-overflow: ellipsis;white-space: nowrap;overflow: hidden;display: inline-block;width: 90%;">
			                    Оцените урок
			                </div>
			            </a>
			        </div>
			    {% if is_trener or is_director %}
			    	{% include 'library/add_topic.html' %}
			    {% endif %}
			    {% if topic %}
			        {% include 'library/topic_detail.html' %}
			    {% else %}
			        {% include 'library/estimate_module.html' %}
			    {% endif %}
			    </div>
			    <div class="ui segment" style="margin-top: 0;background-color: #f9f9fb;color: #757575;">
			        <span>
			            <i class="icon comment"></i>
			            {{ module.comments.all|length }}
			        </span>
			        <span style="float: right;">
			            <a href="{{ module.author_profile.get_absolute_url }}">
			                <img src="{% static 'images/nophoto.svg' %}" style="width: 30px;height: 30px;border-radius: 100%;">
			            </a>
			        </span>
			        <span style="float: right;margin-right: 15px">
			            <a href="{{ module.author_profile.get_absolute_url }}">
			                {{ module.author_profile.first_name }}
			            </a>
			        </span>
			    </div>
			    {% include 'library/comments.html' %}
				<span style="display: none;" class="module_id" id="{{ module.id }}"></span>
				<span style="display: none;" class="current_topic" url = "{{ module.check_topic_url }}" id="{{ module.topics.all.0.id }}"></span>
			</div>
            <div class="two wide column" style="padding-left: 0">
            	<div class="ui segment"></div>
			</div>
		</div>
	</div>
</div>

{% endblock content %}
